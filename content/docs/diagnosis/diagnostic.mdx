---
title: Diagnostic API
description: Conversational AI for clinical data gathering and differential diagnosis generation
---

# Diagnostic API

The Avey Diagnosis API provides conversational AI for gathering clinical data and generating differential diagnoses.

## Base URL

```
https://api.avey.ai
```

## Authentication

```bash
Authorization: Bearer YOUR_API_KEY
```

## Endpoints

### 1. Create Session

**POST** `/diagnosis/session`

```json
{
  "coding_type": "snomed-ct",
  "allow_images": true,
  "patient_info": {
    "age": 34,
    "sex": "female",
    "chief_findings_codes": ["snomed-ct:247345003"]
  }
}
```

**Response:**

```json
{
  "session_id": "f47ac10b-58cc-4372-a567-0e02b2c3d479",
  "question": {
    "id": 1,
    "content": {
      "type": "text",
      "text": "Do you have a fever?",
      "target_concept": {
        "id": "snomed-ct:49727002",
        "term": "Fever"
      }
    }
  },
  "patient_info": {
    /* updated patient info */
  }
}
```

### 2. Update Session

**POST** `/diagnosis/session/{session_id}`

```json
{
  "question_id": 1,
  "answers": [
    {
      "id": "snomed-ct:49727002",
      "status": "present"
    }
  ],
  "image_answers": {
    "img_head_left": "present"
  }
}
```

**Response:** Next question or `null` if session complete.

### 3. Generate Diagnosis

**POST** `/diagnosis/diagnose`

```json
{
  "patient_info": {
    "age": 34,
    "sex": "female",
    "chief_findings": [
      {
        "id": "snomed-ct:247345003",
        "term": "Headache",
        "status": "present"
      }
    ],
    "findings": [
      /* all collected findings */
    ]
  }
}
```

**Response:**

```json
{
  "differential_diagnosis": [
    {
      "id": "snomed-ct:73211009",
      "term": "Migraine",
      "description": "A primary headache disorder...",
      "treatment": "Pain management, lifestyle modifications..."
    }
  ],
  "self_management": "Rest in a quiet, dark room...",
  "urgency": "Non-Urgent"
}
```

## Data Types

### Coding Systems

- `icd-10-cm`: ICD-10 Clinical Modification
- `snomed-ct`: SNOMED Clinical Terms
- `avey-kr`: Avey Knowledge Representation

### Finding Status

- `present`: Patient has symptom
- `absent`: Patient doesn't have symptom
- `unsure`: Patient uncertain

### Question Types

- **Text**: Standard yes/no questions
- **Image**: Body maps for location identification

### Urgency Levels

- `Urgent`: Immediate attention needed
- `Non-Urgent`: Routine care
- `Home Treatable`: Self-manageable

## Workflow

1. Create session with patient info
2. Ask questions and submit answers
3. Repeat until session complete (`question: null`)
4. Generate diagnosis with final patient info

## Error Codes

- `401`: Unauthorized
- `422`: Validation Error

## Best Practices

- Store and reuse `session_id`
- Provide accurate patient demographics
- Handle image questions if supported
- Follow urgency recommendations
